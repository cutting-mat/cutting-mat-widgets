(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{167:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return u}));var i=s(158);const o=i.a.getComponent("Component"),a=i.a.getComponent("TimeTooltip");class r extends o{constructor(t,e){super(t,e),this.options=e,this.timeToltip=new a(t),this.timeToltip.hide(),this.addChild(this.timeToltip),this.addClass("vjs-marker-point-tip"),this.timeToltip.el_.innerHTML=`\n      <p class="vjs-marker-point-tip-time">${i.a.formatTime(this.options.offset,600)}</p>\n      <p class="vjs-marker-point-tip-content">${this.options.data?this.options.data.content:""}</p>\n    `}updatePosition(){this.timeToltip.el_.style.left=`-${this.timeToltip.el_.getBoundingClientRect().width/2}px`}}class n extends o{constructor(t,e){super(t,e),this.offset=e.offset,this.data=e.data,this.tip=new r(t,{data:this.data,offset:this.offset}),this.mouseDisplay=t.getDescendant(["ControlBar","ProgressControl","SeekBar","MouseTimeDisplay"]),this.addChild(this.tip),this.enableTouchActivity(),this.on("mouseenter",t=>{this.mouseDisplay.hide(),this.tip.timeToltip.show(),this.tip.updatePosition()}),this.on("mouseleave",t=>{this.mouseDisplay.show(),this.tip.timeToltip.hide()}),this.on("mousedown",t=>{"function"==typeof e.onClick&&e.onClick(t)})}createEl(){return i.a.dom.createEl("div",{className:"vjs-marker-point"})}updatePosition(t){this.el_&&(this.el_.style.left=this.offset/t*100+"%")}}const l=i.a.getComponent("Component");let p;class d extends l{static build(t,e){e.markers instanceof Array||(e.markers=[]);const s=[];for(let i=e.markers.length;i--;)s.push(new n(t,e.markers[i]));return new d(t,{markers:s,barName:"markerPoint"})}constructor(t,e){super(t,e),e.markers.forEach(t=>this.addChild(t));const s=()=>{e.markers.forEach(t=>{t.updatePosition(p)})},i=()=>{p=t.duration(),s(),t.off("loadedmetadata",i)};p?s():t.on("loadedmetadata",i)}createEl(){return i.a.dom.createEl("div",{className:"vjs-marker-bar"})}}i.a.registerComponent("MarkerBar",d);let h;window.videojs?(h=window.videojs,console.warn("MarkerPlugin: 检测到window.videojs")):h=i.a;const m=h.getPlugin("plugin"),c={};class u extends m{constructor(t,e){super(t),this.player.addClass("vjs-marker-plugin"),this.updateOptions(e)}createMarkerBar(){return this.markerBar=d.build(this.player,{markers:this.options.markers}),this.markerBar}updateOptions(t){this.options=h.mergeOptions(c,t),this.markerBar&&this.markerBar.dispose();const e=this.player.getDescendant(["ControlBar","ProgressControl","SeekBar"]);this.createMarkerBar(),e.addChild(this.markerBar)}}u.defaultState={},u.VERSION="0.0.8",h.registerPlugin("markerPlugin",u)}}]);