(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{162:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(152),l=r(151),o=function(e){function t(t,r){var n,l=r.label;return r.label=l,r.selected=l===t.currentResolution().label,r.selectable=!0,r.multiSelectable=!1,(n=e.call(this,t,r)||this).label=l,n.on(t,"resolutionchange",(function(e){return n.update(e)})),n}Object(n.a)(t,e);var r=t.prototype;return r.handleClick=function(t){e.prototype.handleClick.call(this),this.player().currentResolution(this.label)},r.update=function(){var e=this.label===this.player().currentResolution().label;this.selected(e)},t}(l.a.getComponent("MenuItem"));o.prototype.contentElType="button",l.a.registerComponent("ResolutionMenuItem",o);var s=function(e){function t(t,r){var n;return(n=e.call(this,t)||this).controlText("Quality"),n.on(t,"loadstart",(function(e){return n.updateLabel(e)})),n.on(t,"updateSources",(function(e){n.updateLabel(e),n.update()})),n}Object(n.a)(t,e);var r=t.prototype;return r.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=l.a.dom.createEl("div",{className:"vjs-resolution-button-label",id:this.labelElId_,textContent:""}),t.appendChild(this.labelEl_),t},r.dispose=function(){e.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-resolution-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-resolution-button "+e.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){this.sources=this.player().groupedSrc;var e=[],t=this.sources&&this.sources.label||{};for(var r in t)t.hasOwnProperty(r)&&e.push(new o(this.player(),{label:r,src:t[r],selected:r===(!!this.currentSelection&&this.currentSelection.label)}));return e},r.updateLabel=function(){this.currentSelection=this.player().currentResolution(),this.labelEl_.textContent=this.currentSelection?this.currentSelection.label:""},t}(l.a.getComponent("MenuButton"));l.a.registerComponent("ResolutionMenuButton",s);var i;window.videojs?(i=window.videojs,console.warn("SwitcherPlugin:检测到window.videojs")):i=l.a;var u=function(e){function t(t,r){var n;function l(e,t){return e.res&&t.res?+t.res-+e.res:0}void 0===r&&(r={}),n=e.call(this,t,r)||this,t.updateSrc=function(e){if(!Array.isArray(e)&&e.length)return t.src();e=e.filter((function(e){try{return""!==t.canPlayType(e.type)}catch(e){return!0}})),this.currentSources=e.sort(l),this.groupedSrc=function(e){var t={label:{},res:{},type:{}};return e.map((function(e){for(var r in t)null==t[r][e[r]]&&(t[r][e[r]]=[]),t[r][e[r]].push(e)})),t}(this.currentSources);var n=function(e,t){var n=r.default||"low",l="";"high"===n?(n=t[0].res,l=t[0].label):"low"!==n&&e.res[n]?e.res[n]&&(l=e.res[n][0].label):(n=t[t.length-1].res,l=t[t.length-1].label);return{res:n,label:l,sources:e.res[n]}}(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:n.label,sources:n.sources},t.trigger("updateSources"),t.setSourcesSanitized(n.sources,n.label),t.trigger("resolutionchange"),t},t.currentResolution=function(e){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var r=this.groupedSrc.label[e],n=t.currentTime(),l=t.paused();return!l&&this.player().options_.bigPlayButton&&this.player().bigPlayButton.hide(),t.setSourcesSanitized(r,e).one("loadeddata",(function(){t.currentTime(n),l||t.play(),t.trigger("updateSources"),t.trigger("resolutionchange")})),t}},t.setSourcesSanitized=function(e,r){return this.currentResolutionState={label:r,sources:e},t.src(e.map((function(e){return{src:e.src,type:e.type,res:e.res}}))),t};var o=new s(t);return t.controlBar.el_.insertBefore(o.el_,t.controlBar.getChild("fullscreenToggle").el_),t.options_.sources.length>1&&t.updateSrc(t.options_.sources),n}return Object(n.a)(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(i.getPlugin("plugin"));u.defaultState={},u.VERSION="0.0.6",i.registerPlugin("SwitcherPlugin",u)}}]);